<!DOCTYPE html>
<html lang="es">
<head>
	<!-- Character Set -->
	<meta charset="UTF-8">
	<!-- Viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>FriendFinder | Survey </title>

	<!-- Bootstrap: Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- jQuery -->
	<script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
</head>
<body>

	<!-- The Modal -->
	<div id="myModal" class="modal">
	</div>


	<div class = container>
		<h2>Survey</h2>
		<hr>
		<h3><strong>About You</strong></h3>

		<form>
  			<div class="form-group">
    			<label for="nameInput"><h4>Name (Required)</h4></label>
    			<input type="input" class="form-control" id="nameInput" required>
  			</div>
  			<div class="form-group">
    			<label for="photoInput"><h4>Link to Photo Image (Required)</h4></label>
    			<input type="url" class="form-control" id="photoInput" required>
  			</div>
  			<hr>

  			<div>
  				<h3>Question 1</h3>
  				<h4>Your mind is always buzzing with unexplored ideas and plans</h4>
  				<div class="row">
  					<div class="col-md-4">
		  			<select class="form-control" id="question1">
		  				<option selected disabled>Select an Option</option>
					  	<option value="1">1 (Strongly Disagree)</option>
					  	<option value="2">2</option>
					  	<option value="3">3</option>
					  	<option value="4">4</option>
					  	<option value="5">5 (Strongly Agree)</option>
					</select>
					</div>
				</div>
			</div>

			<div>
  				<h3>Question 2</h3>
  				<h4>Generally speaking, you rely more on your experience than your imagination.</h4>
	  			<div class="row">
  					<div class="col-md-4">
		  			<select class="form-control" id="question2">
		  				<option selected disabled>Select an Option</option>
					  	<option value="1">1 (Strongly Disagree)</option>
					  	<option value="2">2</option>
					  	<option value="3">3</option>
					  	<option value="4">4</option>
					  	<option value="5">5 (Strongly Agree)</option>
					</select>
					</div>
				</div>
			</div>

			<div>
  				<h3>Question 3</h3>
  				<h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
	  			<div class="row">
  					<div class="col-md-4">
		  			<select class="form-control" id="question3">
		  				<option selected disabled>Select an Option</option>
					  	<option value="1">1 (Strongly Disagree)</option>
					  	<option value="2">2</option>
					  	<option value="3">3</option>
					  	<option value="4">4</option>
					  	<option value="5">5 (Strongly Agree)</option>
					</select>
					</div>
				</div>
			</div>

			<div>
  				<h3>Question 4</h3>
  				<h4>You rarely do something just out of sheer curiosity.</h4>
	  			<div class="row">
  					<div class="col-md-4">
		  			<select class="form-control" id="question4">
		  				<option selected disabled>Select an Option</option>
					  	<option value="1">1 (Strongly Disagree)</option>
					  	<option value="2">2</option>
					  	<option value="3">3</option>
					  	<option value="4">4</option>
					  	<option value="5">5 (Strongly Agree)</option>
					</select>
					</div>
				</div>
			</div>

			<div>
  				<h3>Question 5</h3>
  				<h4>People can rarely upset you.</h4>
	  			<div class="row">
  					<div class="col-md-4">
		  			<select class="form-control" id="question5">
		  				<option selected disabled>Select an Option</option>
					  	<option value="1">1 (Strongly Disagree)</option>
					  	<option value="2">2</option>
					  	<option value="3">3</option>
					  	<option value="4">4</option>
					  	<option value="5">5 (Strongly Agree)</option>
					</select>
					</div>
				</div>
			</div>

			<div>
  				<h3>Question 6</h3>
  				<h4>It is often difficult for you to relate to other people’s feelings.</h4>
	  			<div class="row">
  					<div class="col-md-4">
		  			<select class="form-control" id="question6">
		  				<option selected disabled>Select an Option</option>
					  	<option value="1">1 (Strongly Disagree)</option>
					  	<option value="2">2</option>
					  	<option value="3">3</option>
					  	<option value="4">4</option>
					  	<option value="5">5 (Strongly Agree)</option>
					</select>
					</div>
				</div>
			</div>

			<div>
  				<h3>Question 7</h3>
  				<h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
	  			<div class="row">
  					<div class="col-md-4">
		  			<select class="form-control" id="question7">
		  				<option selected disabled>Select an Option</option>
					  	<option value="1">1 (Strongly Disagree)</option>
					  	<option value="2">2</option>
					  	<option value="3">3</option>
					  	<option value="4">4</option>
					  	<option value="5">5 (Strongly Agree)</option>
					</select>
					</div>
				</div>
			</div>

			<div>
  				<h3>Question 8</h3>
  				<h4>You rarely get carried away by fantasies and ideas.</h4>
	  			<div class="row">
  					<div class="col-md-4">
		  			<select class="form-control" id="question8">
		  				<option selected disabled>Select an Option</option>
					  	<option value="1">1 (Strongly Disagree)</option>
					  	<option value="2">2</option>
					  	<option value="3">3</option>
					  	<option value="4">4</option>
					  	<option value="5">5 (Strongly Agree)</option>
					</select>
					</div>
				</div>
			</div>

			<div>
  				<h3>Question 9</h3>
  				<h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
	  			<div class="row">
  					<div class="col-md-4">
		  			<select class="form-control" id="question9">
		  				<option selected disabled>Select an Option</option>
					  	<option value="1">1 (Strongly Disagree)</option>
					  	<option value="2">2</option>
					  	<option value="3">3</option>
					  	<option value="4">4</option>
					  	<option value="5">5 (Strongly Agree)</option>
					</select>
					</div>
				</div>
			</div>

			<div>
  				<h3>Question 10</h3>
  				<h4>You feel more energetic after spending time with a group of people.</h4>
	  			<div class="row">
  					<div class="col-md-4">
		  			<select class="form-control" id="question10">
		  				<option selected disabled>Select an Option</option>
					  	<option value="1">1 (Strongly Disagree)</option>
					  	<option value="2">2</option>
					  	<option value="3">3</option>
					  	<option value="4">4</option>
					  	<option value="5">5 (Strongly Agree)</option>
					</select>
					</div>
				</div>
			</div>
			<br>
  			<button type="submit" class="btn btn-default" id="submitForm">Submit</button>
		</form>
		<br>

		<footer>
			<div>
				<p><a href="/api/friends">API Friends List</a> | <a href="#">GitHub Repo</a></p>
			</div>
		</footer>
	</div>

</body>
</html>


<script type="text/javascript">
	$("#submitForm").on("click", function(event){
		event.preventDefault();

		var responses = [];

		for(var i = 1; i < 11; i++){
			var answers = $("#question" + i).val();
			// console.log(typeof(answers));
			responses.push(answers);
		}

		var nameEntered = $("#nameInput").val().trim();
		var linkEntered = $("#photoInput").val().trim();
		var scoresEntered = responses;

		var validInput = validateForm(nameEntered, linkEntered, responses);
		
		if (validInput === false){
			alert("Please fill out all fields before submitting!");
			// $.get("/survey");
		}
		else {
		// var responses = [];

		// for(var i = 1; i < 11; i++){
		// 	var answers = $("#question" + i).val();
		// 	// console.log(typeof(answers));
		// 	responses.push(answers);
		// }

			console.log(responses);


		// console.log(answer2);
			var newApplicant = {
				name: $("#nameInput").val().trim(),
				photoLink: $("#photoInput").val().trim(),
				scores: responses
			};

		
			$.post("/api/friends", newApplicant).done(function(data){
				console.log(data);
				console.log(data.photo);
				var modalHTML = "<div class='modal-content'><span class='close'>&times;</span><h2>Meet Your Match</h2><h1>"+ data.name +"</h1><img src="+ data.photo +"></div>"
				$("#myModal").append(modalHTML);

				var modal = document.getElementById('myModal');
				var span = document.getElementsByClassName("close")[0];

				
		    	modal.style.display = "block";

		    	span.onclick = function() {
		    		modal.style.display = "none";
				}
				
			});

		}
	});


	function validateForm(name, photo, scores){
		// var name = $("#nameInput").val().trim()
		// console.log(name);
		// console.log(photo);
		// console.log(scores);
		if(name === ""){
			// alert("Name must be filled out");
			return false;
		}
		else if (photo === ""){
			return false;
		}
		else {
			for (var l = 0; l < scores.length; l++){
				// console.log(scores[l]);
				// console.log(typeof(scores[l]));

				if (scores[l] === null){
					return false;
				}
			}
		}

		return true;
	}
</script>


<style type="text/css">
	/* The Modal (background) */
	.modal {
	    display: none; /* Hidden by default */
	    position: fixed; /* Stay in place */
	    z-index: 1; /* Sit on top */
	    left: 0;
	    top: 0;
	    width: 100%; /* Full width */
	    height: 100%; /* Full height */
	    overflow: auto; /* Enable scroll if needed */
	    background-color: rgb(0,0,0); /* Fallback color */
	    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
	}

	/* Modal Content/Box */
	.modal-content {
	    background-color: #fefefe;
	    margin: 15% auto; /* 15% from the top and centered */
	    padding: 20px;
	    border: 1px solid #888;
	    width: 80%; /* Could be more or less, depending on screen size */
	}

	/* The Close Button */
	.close {
	    color: #aaa;
	    float: right;
	    font-size: 28px;
	    font-weight: bold;
	}

	.close:hover,
	.close:focus {
	    color: black;
	    text-decoration: none;
	    cursor: pointer;
	}
</style>


